<!DOCTYPE html>
<html lang="en">
<head>
    <title>价格试算</title>
    <meta charset="utf-8">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/main.css">
    <script src="./scripts/flexible.js"></script>
</head>
<body>
    <div class="mainbox">
        <form class="count_form count-price_form">
            <div class="table-bg">
                <table class="table-panel">
                    <tbody>
                        <tr>
                            <td>市场基准利率</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>我行挂牌基准利率</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>基准利率浮动点差</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>最高优惠点差</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>可优惠点差</td>
                            <td>5.345</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-item form-item-white">
                <label class="label font-s">实际上浮点</label>
                <span class="spider">
                    <span class="sub-btn"></span>
                    <input type="text" id="comeup" class="font-m" value="10BP">
                    <span class="add-btn"></span>
                </span>
            </div>
            <ul class="list-with-dash">
                <li class="dash-item">
                    <label class="label font-s">执行利率</label>
                    <span id="EnforcedForce" class="font-s label-val"></span>
                </li>
                <li class="dash-item">
                    <label class="label font-s">RAROC值</label>
                    <span id="RAROC" class="font-s label-val"></span>
                </li>
                <li class="dash-item">
                    <label class="label font-s">RAROC限额值</label>
                    <span id="RAROCQuota" class="font-s label-val"></span>
                </li>
            </ul>
            <div class="btn-wrap btn-wrap__count"><button class="h-btn h-btn-normal font-m" type="button">客户试算</button></div>
        </form>
    </div>
    <script src="./scripts/jquery-3.2.1.min.js"></script>
    <script src="scripts/calculator.js"></script>
    <script type="text/javascript">
        $(function () {
            APPAttemptCalculate(5.345, {});
        });
        //计算贷款利率
        function APPAttemptCalculate(baseRate, infoJson) {
            var rate = parseInt($("#comeup").val());
            if (isNaN(rate)) {
                alert("实际上浮点错误");
                return;
            }
            rate=rate / 100;
            var jsonModel = CalculatorPdcs4calNetRate(baseRate, 2, rate, infoJson, function () {
                console.log("初始化成功");
            }, function () {
                console.log("发生异常");
            });
            if (jsonModel.STATUS == "1") {
                if (isNaN(parseFloat(jsonModel.ZX_RATE))) {
                    $("#EnforcedForce").text("无");
                } else {
                    $("#EnforcedForce").text(parseFloat(jsonModel.ZX_RATE).toFixed(3));
                }
                if (isNaN(parseFloat(jsonModel.RAROC))) {
                    $("#RAROC").text("无");
                } else {
                    $("#RAROC").text(parseFloat(jsonModel.RAROC).toFixed(3));
                }
                if (isNaN(parseFloat(jsonModel.EVA))) {
                    $("#RAROCQuota").text("无");
                } else {
                    $("#RAROCQuota").text(parseFloat(jsonModel.EVA).toFixed(3));
                }
                console.log(jsonModel);
            } else {
                alert("计算错误");
            }
        }
    </script>
</body>
</html>