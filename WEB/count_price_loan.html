<!DOCTYPE html>
<html lang="en">
<head>
    <title>2-2-1价格试算 贷款等计算器</title>
    <meta charset="utf-8">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/main.css">
    <script src="./scripts/flexible.js"></script>
</head>
<body>
    <div class="mainbox">
        <form class="count_form count-price_form">
            <div class="table-bg">
                <table class="table-panel">
                    <tbody>
                        <tr>
                            <td>市场基准利率</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>我行挂牌基准利率</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>基准利率浮动点差</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>最高优惠点差</td>
                            <td>5.345</td>
                        </tr>
                        <tr>
                            <td>可优惠点差</td>
                            <td>5.345</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-item form-item-white">
                <label class="label font-s">实际上浮点</label>
                <span class="spider" role="spider">
                    <span class="sub-btn" role="sub"></span>
                    <input type="text" class="font-m" value="10BP">
                    <span class="add-btn" role="add"></span>
                </span>
            </div>
            <ul class="list-with-dash">
                <li class="dash-item">
                    <label class="label font-s">执行利率</label>
                    <span class="font-s label-val">5.234</span>
                </li>
                <li class="dash-item">
                    <label class="label font-s">RAROC值</label>
                    <span class="font-s label-val">5.234</span>
                </li>
                <li class="dash-item">
                    <label class="label font-s">RAROC限额值</label>
                    <span class="font-s label-val">5.234</span>
                </li>
            </ul>
            <div class="btn-wrap btn-wrap__count"><button class="h-btn h-btn-normal font-m" type="button">客户试算</button></div>
        </form>
    </div>
    <script src="./scripts/jquery-3.2.1.min.js"></script>
    <script>
        function initSpider(){
            var $spiders = $("[role='spider']");
            var MIN = 10;
            var UNIT =  "BP";
            var PER = 10;
            $spiders.each(function(idx,spider){
                var $spider = $(spider);
                var $input = $spider.children("input");
                $input.on("focus",function(){
                    var value = /^\d*/.exec($input.val());
                    $input.val(Number(value));
                });
                $input.on("blur",function(){
                    var value = /^\d*/.exec($input.val());
                    if(value < MIN){
                        value = MIN;
                    }
                    $input.val(Number(value) + UNIT);
                });
                $spider.children("[role='add']").on("click",function(){
                    var value = /^\d*/.exec($input.val());
                    $input.val(Number(value) + PER + UNIT);
                });
                $spider.children("[role='sub']").on("click",function(){
                    var value = /^\d*/.exec($input.val());
                    var nextValue = Number(value) - PER;
                    if(nextValue < MIN){
                        return;
                    }
                    $input.val(nextValue + UNIT);
                });
            });
            
        }
        $(function(){
            initSpider();
        });
    </script>
</body>
</html>